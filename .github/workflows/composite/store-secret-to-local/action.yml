name: Store Secret

inputs:
  secret_from_repo:
    required: true
    type: string
    description: 'A secret profile in application. ( secrets.??? )'
  file_dir:
    required: true
    type: string
    description: './, ./'
  file_name:
    required: true
    type: string
    description: 'secret.txt, application-prod.yml, etc'

runs:
  using: 'composite'

  steps:
    - name: Check whether duplicate exists
      shell: bash
      run: |
        if [ -f "${{ inputs.file_dir }}" ]; then
          exit 1
        fi

    - name: Store secret
      shell: bash
      run: |
        mkdir -p "${{ inputs.file_dir }}"
        echo "${{ inputs.file_dir }}" > "${{ inputs.file_dir }}/${{ inputs.file_name }}"
